<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>mpegts.js demo</title>
</head>
<body>
    <div class="mainContainer">
        <div>
            <div id="mediaSourceURL" class="hidden">
                <div class="url-input">
                    <label for="msURL">MediaSource:</label>
                    <input id="msURL" type="text" value="https://rtc-hz-dev.oss-cn-hangzhou.aliyuncs.com/records/collect/test.ts" />
                </div>
            </div>
        </div>
        <div class="video-container">
            <div>
                <video name="videoElement" class="centeredVideo" controls autoplay>
                    Your browser is too old which doesn't support HTML5 video.
                </video>
            </div>
        </div>
        <div class="controls">
            <button onclick="player_load()">Load</button>
            <button onclick="player_start()">Start</button>
            <button onclick="player_pause()">Pause</button>
            <button onclick="player_destroy()">Destroy</button>
        </div>
    </div>
    <script src="mpegts.js"></script>
    <script>
        function player_load() {
            var element = document.getElementsByName('videoElement')[0];
            if (typeof player !== "undefined") {
                if (player != null) {
                    player.unload();
                    player.detachMediaElement();
                    player.destroy();
                    player = null;
                }
            }
            var url = document.getElementById('msURL').value;
            console.log(url);
            var mediaDataSource = {
                url: url,
                type: 'mse'
            };
            player = mpegts.createPlayer(mediaDataSource, {
                enableWorker: true,
                lazyLoadMaxDuration: 3 * 60,
                seekType: 'range',
                liveBufferLatencyChasing: false,
            });
            player.attachMediaElement(element);
            player.load();
        }
        function player_start() {
            if (player != null) {
               player.play();
            }
        }
        function player_pause() {
            if (player != null) {
                player.pause();
            }
        }
        function player_destroy() {
            if (player != null) {
                player.pause();
                player.unload();
                player.detachMediaElement();
                player.destroy();
                player = null;
            }
        }
    </script>
</body>
</html>